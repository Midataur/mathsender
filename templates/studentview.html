{% extends "base.html" %}
{% block title%}{{code}} Student{%endblock%}
{% block head %}

<script type="text/javascript" charset="utf-8">
	//puts you in a room
    var socket = io.connect('http://' + document.domain + ':' + location.port);
    socket.on('connect', function() {
        socket.emit('room_connect','{{code}}');
    });
</script>

<script>
    function gen_question_el(question,qid) {
		question_el = document.createElement("p");
		link = document.createElement('a')
		link.href = '/student/room/{{code}}/questions/'+qid+'?name={{name}}';
		link.innerText = question;
		question_el.appendChild(document.createElement('br'));
		question_el.appendChild(link)
        return question_el;
    }
</script>

<script type="text/javascript" charset="utf-8">
    socket.on('new_question_client', function( qdata ) {
		question = '\\('+qdata[0]+'\\)';
		qid = qdata[1];

        question_el = gen_question_el(question,qid);
        console.log(question_el);
        
		questions = document.getElementById('questions');
		question_div = document.createElement('div');
		question_div.class = "question";
		question_div.appendChild(question_el);
		questions.insertBefore(question_div, questions.firstChild);
        
        renderMathInElement(question_div);
    });
</script>

{%endblock%}
{% block content %}
		Questions:
		<div id="questions">
			{% for question in questions %}
				<div class="question">
					<br/>
					<a href="/student/room/{{code}}/questions/{{question['id']}}?name={{name}}">\({{question['text']}}\)</a>
				</div>
			{% endfor %}
		</div>
{%endblock%}
