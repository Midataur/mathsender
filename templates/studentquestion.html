{% extends "base.html" %}
{% block title%}{{code}} Teacher{%endblock%}
{% block roomCode %}{{code}}{%endblock%}
{% block head %}

<script type="text/javascript" charset="utf-8">
	//puts you in a room
    var socket = io();
    socket.on('connect', function() {
        socket.emit('room_connect','{{code}}');
    });
</script>

<script>
	function send_answer() {
		var answer = answerMathField.latex();
		var code = '{{code}}';
		var qid = '{{question["id"]}}'
		var name = '{{name}}'
		socket.emit('new_answer',name,answer,code,qid);
		alert('Answer sent!')
		return false;
	}
</script>

{% endblock %}
{% block content %}
		<i>\({{question['text']}}\)</i><br/>
		{% if answer %}
		Your current answer: {{answer['answer']}}
		<h3>Change answer</h3>
		{% else %}
		<h3>Submit answer</h3>
		{% endif %}
		<p><span id="answer-input"></span></p><br/>
		<!-- MathQuill -->
		<script>
			var answerSpan = document.getElementById('answer-input');
			var answerMathField = MQ.MathField(answerSpan, {
			  handlers: {
				enter: function() {
					send_answer(); //submits the answer
				}
			  }
			});
		</script>
{%endblock%}